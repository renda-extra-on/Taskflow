<!DOCTYPE html>
<html lang="pt-BR" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TaskFlow</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .task-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        .btn-primary {
            @apply bg-indigo-600 text-white hover:bg-indigo-700 focus:ring-4 focus:ring-indigo-500/50;
        }
        .btn-secondary {
            @apply bg-gray-600 text-gray-200 hover:bg-gray-700 focus:ring-4 focus:ring-gray-500/50;
        }
        .glass-effect {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .modal-overlay {
            background: rgba(0, 0, 0, 0.75);
            backdrop-filter: blur(5px);
        }
        .notification-box {
            animation: fadeInScale 0.2s ease-out forwards;
        }
        @keyframes fadeInScale {
            from {
                opacity: 0;
                transform: scale(0.95);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }
    </style>
</head>
<body class="bg-gray-900 text-gray-200">
    <div id="app" class="flex flex-col md:flex-row min-h-screen">
        
        <!-- Sidebar/Navigation -->
        <nav class="bg-gray-900/80 backdrop-blur-md border-b md:border-b-0 md:border-r border-gray-700/50 p-4 md:p-6 w-full md:w-64 flex-shrink-0">
            <div class="flex items-center justify-between md:justify-start">
                <a href="#inicio" id="logo-link" class="flex items-center space-x-2 text-2xl font-bold">
                    <span id="logo-icon"></span>
                    <span>TaskFlow</span>
                </a>
                <button id="mobile-menu-button" class="md:hidden p-2 rounded-lg hover:bg-gray-700">
                    <i data-lucide="menu"></i>
                </button>
            </div>
            <div id="nav-menu" class="hidden md:flex flex-col mt-8 space-y-2">
                <a href="#inicio" class="nav-link active flex items-center space-x-3 px-4 py-3 rounded-lg text-gray-200 bg-gray-700/50">
                    <i data-lucide="layout-dashboard"></i>
                    <span>Início</span>
                </a>
                <a href="#tarefas" class="nav-link flex items-center space-x-3 px-4 py-3 rounded-lg text-gray-400 hover:bg-gray-800 hover:text-gray-200 transition-colors">
                    <i data-lucide="check-square"></i>
                    <span>Tarefas</span>
                </a>
                <a href="#ajuda" class="nav-link flex items-center space-x-3 px-4 py-3 rounded-lg text-gray-400 hover:bg-gray-800 hover:text-gray-200 transition-colors">
                    <i data-lucide="help-circle"></i>
                    <span>Ajuda</span>
                </a>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="flex-1 p-4 sm:p-6 lg:p-8 overflow-y-auto pb-20 md:pb-8">
            
            <!-- Header -->
            <header class="flex items-center justify-between mb-8">
                <h1 id="page-title" class="text-3xl font-bold text-white">Painel</h1>
                <div class="flex items-center space-x-4">
                    <!-- Botão de Notificação (ponto vermelho removido) -->
                    <div class="relative">
                        <button id="notification-btn" class="p-2 rounded-full hover:bg-gray-800 relative">
                            <i data-lucide="bell"></i>
                        </button>
                        
                        <!-- Caixa de Notificação (Inicialmente oculta) -->
                        <div id="notification-box" class="absolute top-full right-0 mt-3 w-72 bg-gray-800/70 glass-effect rounded-xl shadow-lg border border-gray-700/50 p-4 z-50 hidden">
                            <div class="flex flex-col items-center text-center">
                                <i data-lucide="bell-off" class="h-12 w-12 text-gray-400 mb-2"></i>
                                <p class="text-white font-semibold">Sem Notificações</p>
                                <p class="text-gray-400 text-sm mt-1">Nenhuma notificação nova no momento.</p>
                            </div>
                        </div>
                    </div>

                    <div class="flex items-center space-x-3 p-2 rounded-lg glass-effect">
                        <img src="https://placehold.co/40x40/7c3aed/ffffff?text=U" alt="Avatar do Usuário" class="w-10 h-10 rounded-full border-2 border-indigo-500">
                        <div>
                            <p class="font-semibold text-white text-sm">Usuário</p>
                            <p id="user-level-header" class="text-xs text-gray-400">Nível 1</p>
                        </div>
                    </div>
                </div>
            </header>

            <!-- Page Content -->
            <div id="page-content">
                
                <!-- Início Page -->
                <div id="inicio-page" class="page">
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                        <!-- Saldo Card -->
                        <div class="lg:col-span-2 p-6 rounded-2xl bg-gradient-to-br from-indigo-700 to-indigo-900 shadow-lg">
                            <div class="flex justify-between items-start">
                                <div>
                                    <p class="text-indigo-200">Saldo Disponível</p>
                                    <p id="user-balance" class="text-4xl font-bold text-white mt-2">R$ 0,00</p>
                                </div>
                                <i data-lucide="wallet" class="w-10 h-10 text-indigo-300"></i>
                            </div>
                            <div class="mt-8 flex flex-col sm:flex-row space-y-3 sm:space-y-0 sm:space-x-4">
                                <button id="deposit-btn" class="flex-1 flex items-center justify-center space-x-2 py-3 px-5 rounded-lg font-semibold bg-white/90 text-indigo-700 hover:bg-white transition-transform hover:scale-105">
                                    <i data-lucide="arrow-down-circle"></i>
                                    <span>Depositar</span>
                                </button>
                                <div class="flex-1 flex flex-col items-center justify-center">
                                    <button id="withdraw-btn" class="w-full flex items-center justify-center space-x-2 py-3 px-5 rounded-lg font-semibold bg-white/20 text-white hover:bg-white/30 transition-transform hover:scale-105">
                                        <i data-lucide="arrow-up-circle"></i>
                                        <span>Sacar</span>
                                    </button>
                                    <p class="text-xs text-gray-400 mt-2">valor minimo de saque 5 R$</p>
                                </div>
                            </div>
                        </div>
                        <!-- Nível Card -->
                        <div class="p-6 rounded-2xl bg-gray-800/70 glass-effect">
                            <div class="flex justify-between items-center">
                                <h3 class="font-semibold text-lg text-white">Seu Nível</h3>
                                <span id="user-level" class="font-bold text-lg text-indigo-400">Nível 1</span>
                            </div>
                            <p class="text-gray-400 text-sm mt-2">Complete mais tarefas para subir de nível e ganhar melhores recompensas.</p>
                            <!-- Barra de progresso removida -->
                        </div>
                    </div>
                </div>

                <!-- Tarefas Page -->
                <div id="tarefas-page" class="page hidden">
                    <div class="flex flex-col sm:flex-row justify-between items-center mb-6 gap-4">
                       <h2 class="text-2xl font-bold text-white">Tarefas Disponíveis (Nível 2)</h2>
                    </div>
                    <div id="tasks-list" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        <!-- Tarefas serão injetadas aqui -->
                    </div>
                </div>

                <!-- Executar Tarefa Page -->
                <div id="executar-tarefa-page" class="page hidden">
                    <!-- Conteúdo será injetado dinamicamente -->
                </div>

                <!-- Ajuda Page -->
                <div id="ajuda-page" class="page hidden">
                    <div class="max-w-4xl mx-auto">
                        <h2 class="text-3xl font-bold text-white text-center mb-2">Central de Ajuda</h2>
                        <p class="text-gray-400 text-center mb-8">Encontre respostas para as perguntas mais comuns.</p>

                        <div id="faq-container" class="space-y-4">
                            <!-- FAQs serão injetadas aqui -->
                        </div>
                            <div class="mt-12 bg-gray-800/70 glass-effect rounded-2xl p-8 text-center">
                               <h3 class="text-2xl font-bold text-white">Ainda precisa de ajuda?</h3>
                               <p class="text-gray-400 mt-2">Nossa equipe de suporte está pronta para te ajudar 24/7.</p>
                               <button id="support-btn" class="mt-6 py-3 px-6 rounded-lg font-semibold btn-primary transition-transform hover:scale-105">
                                    Fale com o Suporte
                               </button>
                            </div>
                    </div>
                </div>
            </div>
        </main>
        
        <!-- Bottom Navigation (Mobile Only) -->
        <nav id="bottom-nav" class="md:hidden fixed bottom-0 left-0 right-0 bg-gray-900/80 backdrop-blur-md border-t border-gray-700/50 p-2 flex justify-around">
            <a href="#inicio" class="bottom-nav-link active flex flex-col items-center justify-center space-y-1 w-full text-indigo-400 rounded-lg py-1">
                <i data-lucide="layout-dashboard"></i>
                <span class="text-xs font-medium">Início</span>
            </a>
            <a href="#tarefas" class="bottom-nav-link flex flex-col items-center justify-center space-y-1 w-full text-gray-400 rounded-lg py-1">
                <i data-lucide="check-square"></i>
                <span class="text-xs font-medium">Tarefas</span>
            </a>
            <a href="#ajuda" class="bottom-nav-link flex flex-col items-center justify-center space-y-1 w-full text-gray-400 rounded-lg py-1">
                <i data-lucide="help-circle"></i>
                <span class="text-xs font-medium">Ajuda</span>
            </a>
        </nav>
    </div>

    <!-- Modal para transações (Depósito/Saque) -->
    <div id="transaction-modal" class="fixed inset-0 z-50 hidden modal-overlay flex items-center justify-center px-4">
        <div class="bg-gray-800/70 glass-effect rounded-xl p-8 max-w-sm w-full mx-auto text-center shadow-2xl">
            <div class="flex justify-center mb-4">
                 <i data-lucide="circle-alert" class="w-16 h-16 text-yellow-400"></i>
            </div>
            <h3 class="text-xl font-bold text-white mb-2">Atenção</h3>
            <p class="text-gray-400 mb-6">As transações de depósito e saque estão disponíveis apenas de forma manual. Para prosseguir, por favor, chame o suporte.</p>
            <button id="close-modal-btn" class="w-full py-3 px-5 rounded-lg font-semibold btn-primary transition-transform hover:scale-105">
                Entendido
            </button>
        </div>
    </div>
    
    <!-- Novo Modal para Suporte (com o número Zangi) -->
    <div id="support-modal" class="fixed inset-0 z-50 hidden modal-overlay flex items-center justify-center px-4">
        <div class="bg-gray-800/70 glass-effect rounded-xl p-8 max-w-sm w-full mx-auto text-center shadow-2xl">
            <div class="flex justify-center mb-4">
                 <i data-lucide="phone-call" class="w-16 h-16 text-emerald-400"></i>
            </div>
            <h3 class="text-xl font-bold text-white mb-2">Fale com o Suporte</h3>
            <p class="text-gray-400 mb-6">Entre em contato com a nossa equipe de suporte pelo Zangi no número:</p>
            <p class="text-2xl font-bold text-white mb-6">Zangi: 10-6479-5500</p>
            <button id="close-support-modal-btn" class="w-full py-3 px-5 rounded-lg font-semibold btn-primary transition-transform hover:scale-105">
                Fechar
            </button>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            lucide.createIcons();
            
            const userData = {
                name: 'Usuário',
                level: 2,
                balance: 2.50,
            };

            const tasksData = [
                { id: 1, title: 'Avaliar local', reward: 0.50, level: 2, icon: 'building-2', link: 'https://maps.app.goo.gl/vrfX4TgFXqvg1sKm8' },
                { id: 2, title: 'Avaliar local', reward: 0.50, level: 2, icon: 'building-2', link: 'https://maps.app.goo.gl/QtrC11CWSGqBcHNx8' },
                { id: 3, title: 'Avaliar local', reward: 0.50, level: 2, icon: 'building-2', link: 'https://maps.app.goo.gl/7y3dpK8WUbnPd2PMA' },
                { id: 4, title: 'Avaliar local', reward: 0.50, level: 2, icon: 'building-2', link: 'https://maps.app.goo.gl/SRhVPEifLWGb56Av6' },
                { id: 5, title: 'Avaliar local', reward: 0.50, level: 2, icon: 'building-2', link: 'https://maps.app.goo.gl/pe99YkUTz6sNgvWg9' },
            ];
            
            const faqsData = [
                { q: 'Como funciona o sistema de níveis?', a: 'Cada usuário começa realizando tarefas simples. À medida que você completa conjuntos de tarefas, sobe de nível. Cada nível possui um tipo específico de tarefa e, conforme seu nível aumenta, o valor pago por tarefa também cresce. Você também pode acessar tarefas mais complexas ou até pagas, que são totalmente opcionais, e o valor mínimo para saque aumenta proporcionalmente ao seu nível.' },
                { q: 'De onde vêm as tarefas?', a: 'As tarefas vêm de empresas que precisam de pequenos serviços, como avaliações, testes ou feedback de produtos. Por exemplo, uma empresa dos Estados Unidos pode precisar que 1.000 pessoas avaliem seu serviço para melhorar sua reputação. Nós recebemos essa tarefa e a dividimos entre os usuários da plataforma, garantindo oportunidades de ganho para todos.' },
                { q: 'As tarefas são seguras?', a: 'Sim, todas as tarefas passam por um rigoroso processo de verificação pela nossa equipe para garantir segurança e legitimidade. Seus dados estão sempre protegidos e você só realiza tarefas verificadas e confiáveis.' },
                { q: 'Quais são os métodos de saque disponíveis?', a: 'Atualmente, oferecemos saques via PIX, com processamento rápido geralmente concluído em até alguns minutos. O valor mínimo de saque varia de acordo com seu nível na plataforma.' },
            ];
            
            const pages = document.querySelectorAll('.page');
            const navLinks = document.querySelectorAll('.nav-link');
            const bottomNavLinks = document.querySelectorAll('.bottom-nav-link');
            const logoLink = document.getElementById('logo-link');
            const pageTitle = document.getElementById('page-title');
            const logoIcon = document.getElementById('logo-icon');
            const tasksListContainer = document.getElementById('tasks-list');
            const taskExecutionPage = document.getElementById('executar-tarefa-page');

            // Elementos para os modais
            const depositBtn = document.getElementById('deposit-btn');
            const withdrawBtn = document.getElementById('withdraw-btn');
            const transactionModal = document.getElementById('transaction-modal');
            const closeTransactionModalBtn = document.getElementById('close-modal-btn');
            const supportBtn = document.getElementById('support-btn');
            const supportModal = document.getElementById('support-modal');
            const closeSupportModalBtn = document.getElementById('close-support-modal-btn');

            // Elementos de notificação
            const notificationBtn = document.getElementById('notification-btn');
            const notificationBox = document.getElementById('notification-box');

            function updateBalanceUI() {
                document.getElementById('user-balance').textContent = `R$ ${userData.balance.toFixed(2).replace('.', ',')}`;
            }

            function initialRender() {
                logoIcon.innerHTML = `<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="text-indigo-500">
                    <path d="M12 2L2 7V17L12 22L22 17V7L12 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M2 7L12 12M22 7L12 12M12 22V12M17 4.5L7 9.5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>`;
                
                updateBalanceUI();
                document.getElementById('user-level-header').textContent = `Nível ${userData.level}`;
                document.getElementById('user-level').textContent = `Nível ${userData.level}`;
                
                tasksListContainer.innerHTML = tasksData.map(task => `
                    <div class="task-card bg-gray-800/70 glass-effect rounded-2xl p-6 flex flex-col transition-all duration-300">
                        <div class="flex items-center space-x-4 mb-4">
                            <div class="p-3 bg-indigo-500/20 text-indigo-400 rounded-lg">
                                <i data-lucide="${task.icon}"></i>
                            </div>
                            <div>
                                <h3 class="font-bold text-lg text-white">${task.title}</h3>
                                <span class="text-sm font-medium text-green-400">Recompensa: R$ ${task.reward.toFixed(2).replace('.', ',')}</span>
                            </div>
                        </div>
                        <p class="text-gray-400 text-sm flex-1 mb-6">Requisito: Nível ${task.level}. Avalie o local com 5 estrelas.</p>
                        <button data-task-id="${task.id}" class="iniciar-tarefa-btn w-full mt-auto py-2.5 px-4 rounded-lg font-semibold text-sm btn-primary transition-transform hover:scale-105">
                            Iniciar Tarefa
                        </button>
                    </div>
                `).join('');
                
                const faqContainer = document.getElementById('faq-container');
                faqContainer.innerHTML = faqsData.map((faq) => `
                    <div class="faq-item bg-gray-800/70 glass-effect rounded-xl overflow-hidden">
                        <button class="faq-question w-full flex justify-between items-center text-left p-5 font-semibold text-white">
                            <span>${faq.q}</span>
                            <i data-lucide="chevron-down" class="w-5 h-5 transition-transform"></i>
                        </button>
                        <div class="faq-answer max-h-0 overflow-hidden transition-all duration-300 ease-in-out">
                            <p class="p-5 pt-0 text-gray-400">${faq.a}</p>
                        </div>
                    </div>
                `).join('');
                
                lucide.createIcons();
            }

            function showPage(pageId) {
                pages.forEach(page => page.classList.add('hidden'));
                const activePage = document.getElementById(`${pageId}-page`);
                if(activePage) activePage.classList.remove('hidden');
                
                const pageName = pageId.charAt(0).toUpperCase() + pageId.slice(1);
                pageTitle.textContent = pageId === 'inicio' ? 'Painel' : pageId === 'executar-tarefa' ? 'Realizar Tarefa' : pageName;
            }

            function renderTaskExecutionPage(task) {
                taskExecutionPage.innerHTML = `
                    <div class="bg-gray-800/70 glass-effect rounded-2xl p-8 max-w-2xl mx-auto">
                        <button id="back-to-tasks" class="flex items-center space-x-2 text-indigo-400 hover:text-indigo-300 mb-6">
                            <i data-lucide="arrow-left"></i>
                            <span>Voltar para tarefas</span>
                        </button>
                        <h2 class="text-3xl font-bold text-white mb-2">${task.title}</h2>
                        <p class="text-gray-400 mb-6">Siga os passos abaixo para completar a tarefa.</p>
                        
                        <div class="space-y-6 bg-gray-900/50 p-6 rounded-lg">
                            <div>
                                <h3 class="font-semibold text-white flex items-center space-x-2"><span class="flex items-center justify-center w-6 h-6 bg-indigo-600 rounded-full text-sm">1</span><span>Visite a página do local</span></h3>
                                <p class="text-gray-400 text-sm mt-2 ml-8">Clique no botão abaixo para abrir a página do local em uma nova aba do seu navegador e completar a tarefa.</p>
                                <a href="${task.link}" target="_blank" rel="noopener noreferrer" class="w-full mt-3 ml-8 inline-block py-3 px-6 rounded-lg font-bold text-sm btn-primary text-center transition-transform hover:scale-105">
                                    Realizar Tarefa
                                </a>
                            </div>
                        </div>
                    </div>
                `;
                lucide.createIcons();
                document.getElementById('back-to-tasks').addEventListener('click', () => handleNavigation('tarefas'));
            }
            
            function handleNavigation(pageId) {
                // Sincroniza a Sidebar
                navLinks.forEach(l => {
                    const linkPage = l.getAttribute('href').substring(1);
                    const isActive = linkPage === pageId;
                    l.classList.toggle('active', isActive);
                    l.classList.toggle('bg-gray-700/50', isActive);
                    l.classList.toggle('text-gray-200', isActive);
                    l.classList.toggle('text-gray-400', !isActive);
                });
                
                // Sincroniza a Barra de Navegação Inferior
                bottomNavLinks.forEach(l => {
                    const linkPage = l.getAttribute('href').substring(1);
                    const isActive = linkPage === pageId;
                    l.classList.toggle('active', isActive);
                    l.classList.toggle('text-indigo-400', isActive);
                    l.classList.toggle('text-gray-400', !isActive);
                });

                showPage(pageId);
            }

            // Abre o modal de transação genérico
            function openTransactionModal() {
                transactionModal.classList.remove('hidden');
            }

            // Fecha o modal de transação genérico
            function closeTransactionModal() {
                transactionModal.classList.add('hidden');
            }

            // Abre o modal de suporte
            function openSupportModal() {
                supportModal.classList.remove('hidden');
            }
            
            // Fecha o modal de suporte
            function closeSupportModal() {
                supportModal.classList.add('hidden');
            }

            // Mostra ou esconde a caixa de notificação
            function toggleNotificationBox() {
                const isHidden = notificationBox.classList.contains('hidden');
                notificationBox.classList.toggle('hidden', !isHidden);
            }

            // Listener para o botão de notificação
            notificationBtn.addEventListener('click', (e) => {
                e.stopPropagation();
                toggleNotificationBox();
            });

            // Listener para fechar a notificação ao clicar fora dela
            document.addEventListener('click', (e) => {
                if (!notificationBox.contains(e.target) && !notificationBtn.contains(e.target)) {
                    if (!notificationBox.classList.contains('hidden')) {
                        notificationBox.classList.add('hidden');
                    }
                }
            });

            [...navLinks, ...bottomNavLinks, logoLink].forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const pageId = link.getAttribute('href').substring(1);
                    handleNavigation(pageId);
                    
                    // Fecha menu mobile se estiver aberto
                    const navMenu = document.getElementById('nav-menu');
                    if (!navMenu.classList.contains('hidden')) navMenu.classList.add('hidden');
                });
            });

            tasksListContainer.addEventListener('click', (e) => {
                const button = e.target.closest('.iniciar-tarefa-btn');
                if (button) {
                    const taskId = parseInt(button.dataset.taskId, 10);
                    const task = tasksData.find(t => t.id === taskId);
                    if (task) {
                        renderTaskExecutionPage(task);
                        showPage('executar-tarefa');
                    }
                }
            });

            document.getElementById('faq-container').addEventListener('click', (e) => {
                const questionButton = e.target.closest('.faq-question');
                if (questionButton) {
                    const faqItem = questionButton.parentElement;
                    const answer = faqItem.querySelector('.faq-answer');
                    const icon = questionButton.querySelector('i');
                    faqItem.classList.toggle('open');
                    if (faqItem.classList.contains('open')) {
                        answer.style.maxHeight = answer.scrollHeight + 'px';
                        icon.style.transform = 'rotate(180deg)';
                    } else {
                        answer.style.maxHeight = '0px';
                        icon.style.transform = 'rotate(0deg)';
                    }
                }
            });

            // Adiciona listeners para os botões de transação
            depositBtn.addEventListener('click', openTransactionModal);
            withdrawBtn.addEventListener('click', openTransactionModal);
            closeTransactionModalBtn.addEventListener('click', closeTransactionModal);

            // Adiciona listeners para o novo botão de suporte
            supportBtn.addEventListener('click', openSupportModal);
            closeSupportModalBtn.addEventListener('click', closeSupportModal);

            // Fecha os modais clicando fora da caixa
            transactionModal.addEventListener('click', (e) => {
                if (e.target === transactionModal) {
                    closeTransactionModal();
                }
            });
            
            supportModal.addEventListener('click', (e) => {
                if (e.target === supportModal) {
                    closeSupportModal();
                }
            });

            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const navMenu = document.getElementById('nav-menu');
            mobileMenuButton.addEventListener('click', () => navMenu.classList.toggle('hidden'));

            initialRender();
            showPage('inicio');
        });
    </script>
</body>
</html>
